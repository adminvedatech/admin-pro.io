(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{V3FQ:function(e,t,o){"use strict";o.d(t,"a",(function(){return p}));var i=o("PSD3"),s=o.n(i),r=o("tk/3"),l=o("fXoL"),a=o("HAwj"),c=o("XN1f"),n=o("ofXK");const d=function(e){return{width:e}};function b(e,t){if(1&e&&(l.Lb(0,"div",16),l.Lb(1,"div",17),l.hc(2),l.Kb(),l.Kb()),2&e){const e=l.Ub();l.xb(1),l.Yb("ngStyle",l.ac(3,d,e.progress.percentage+"%")),l.yb("aria-valuenow",e.progress.percentage),l.xb(1),l.jc(" ",e.progress.percentage,"%")}}let p=(()=>{class e{constructor(e,t){this._modalService=e,this._uploadService=t,this.oculto="",this.name="",this.text="",this.select=!1,this.progress={percentage:0},this.type=""}ngOnInit(){}cerrarModal(){this._modalService.cerrarModalUpload(),this.select=!1}onFileSelected(e){console.log("EVENT ",e.target.files[0]),this.progress.percentage=0,this.select=!0,this.selectedFile=e.target.files[0];try{this.name=this.selectedFile.name,this.text="Nombre del Archivo para ser enviado :",this.type=this.selectedFile.name.split(".")[1],console.log(this.selectedFile.name.split(".")[1]),"xml"!==this.type&&"csv"!=this.type?(console.log("ERROR!"),this.cancelFile(),s.a.fire({icon:"error",title:"Seleccin de Archivo",text:"Seleccione un Archivo CSV o XML!"}),this.select=!1):console.log("go ahead")}catch(t){console.log("ERROR EN ARCHIVO",t.error),this.cancelFile(),s.a.fire("Error!","Cancelar y seleccionar un archivo nuevo!","warning")}}cancelFile(){this.name="",this.text="",console.log("Cancel File",this.selectedFile)}subirArchivo(){switch(this.progress.percentage=0,this.currentFileUpload=this.selectedFile,console.log("SWITCH",this._modalService.tipo),console.log("SWITCH",this._modalService.url),this._modalService.tipo){case"customer":case"proveedor":this._uploadService.sendXmlInvoice(this.selectedFile,this._modalService.url).subscribe(e=>{e.type===r.d.UploadProgress?this.progress.percentage=Math.round(100*e.loaded/e.total):e instanceof r.g&&(console.log("File is completely uploaded!"),this.name="",this._modalService.cerrarModalProveedor(),this.progress.percentage=0,this.select=!1)});break;case"csv":this._uploadService.pushFileToStorage(this.selectedFile,this._modalService.url).subscribe(e=>{e.type===r.d.UploadProgress?this.progress.percentage=Math.round(100*e.loaded/e.total):e instanceof r.g&&(console.log("File is completely uploaded!"),this.name="",this._modalService.cerrarModalProveedor(),this.progress.percentage=0,this.select=!1)})}}}return e.\u0275fac=function(t){return new(t||e)(l.Ib(a.a),l.Ib(c.a))},e.\u0275cmp=l.Cb({type:e,selectors:[["app-modal-upload"]],decls:24,vars:5,consts:[[1,"fondo-negro","animated","fadein",3,"ngClass"],["tabindex","-1","role","dialog",1,"modal",2,"display","block"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","pointer","modal-upload",3,"change"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input"],["for","inputGroupFile02",1,"custom-file-label"],["class","progress",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped",3,"ngStyle"]],template:function(e,t){1&e&&(l.Lb(0,"div",0),l.Lb(1,"div",1),l.Lb(2,"div",2),l.Lb(3,"div",3),l.Lb(4,"div",4),l.Lb(5,"h5",5),l.hc(6,"Oprima el boton izquierdo del mouse para seleccionar"),l.Kb(),l.Lb(7,"button",6),l.Sb("click",(function(){return t.cerrarModal()})),l.Lb(8,"span",7),l.hc(9,"\xd7"),l.Kb(),l.Kb(),l.Kb(),l.Lb(10,"div",8),l.Sb("change",(function(e){return t.onFileSelected(e)})),l.Lb(11,"div",9),l.Jb(12,"input",10),l.Lb(13,"label",11),l.Lb(14,"h3"),l.hc(15),l.Lb(16,"dt"),l.hc(17),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.gc(18,b,3,5,"div",12),l.Lb(19,"div",13),l.Lb(20,"button",14),l.Sb("click",(function(){return t.cerrarModal()})),l.hc(21,"Close"),l.Kb(),l.Lb(22,"button",15),l.Sb("click",(function(){return t.subirArchivo()})),l.hc(23,"Enviar Archivo"),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb()),2&e&&(l.Yb("ngClass",t._modalService.modalUpload),l.xb(15),l.jc(" ",t.text," "),l.xb(2),l.ic(t.name),l.xb(1),l.Yb("ngIf",t.currentFileUpload),l.xb(4),l.Yb("disabled",!t.select))},directives:[n.j,n.l,n.m],styles:[""]}),e})()}}]);